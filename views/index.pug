extends layout

block content
  h1= title
  p Welcome to #{title}

  //- #login
  //-   label(for="username") Login
  //-   input(id="username" placeholder="Login" required="" autofocus="")
  //-   button#login Login

  //- #call
  //-   video#local(autoplay)
  //-   video#remote(autoplay)
  //-   input#username-to-call(placeholder="Username to call")
  //-   button#call Call
  //-   button#close-call Close call

  ul#messages
  form(action='')
    input#m(autocomplete='off')
    button Send


  script(src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.js")
  script(src="https://code.jquery.com/jquery-1.11.1.js")
  script.
    $(function () {
      var socket = io();
      $('form').submit(function(e){
        e.preventDefault(); // prevents page reloading
        socket.emit('chat message', $('#m').val());
        $('#m').val('');
        return false;
      });
      socket.on('chat message', function(msg){
        $('#messages').append($('<li>').text(msg));
      });
    });
  script(src='./javascripts/client.js')